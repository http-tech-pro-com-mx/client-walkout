<div class="main-content">
  <app-loader *ngIf="loading"></app-loader>
  <div class="container-fluid" *ngIf="!loading">
    <div class="row">
      <div class="col-md-12">
        <div id="contenido" class="card">
          <div class="header">
            <h4 class="title">{{ create ? 'Crear IP' : 'Actualizar IP' }}</h4>
          </div>
          <div class="content">
            <form [formGroup]="form" (ngSubmit)="actionFormIp()" autocomplete="off">
              <div class="row">
                <div class="col-md-12">
                  <label for="">Proyecto</label>
                  <select class="proyectos" [(ngModel)]="selectedProject" formControlName='id_proyecto' (change)="limpiarBusqueda()">
                    <option data-tokens="proyecto.nombre" *ngFor="let proyecto of proyectos" [value]="proyecto.id_proyecto" selected="proyecto.id_proyecto == selectedProject">{{ proyecto.nombre }}</option>
                  </select>
                  <small *ngIf="form.controls.id_proyecto.errors?.required && (form.controls.id_proyecto?.touched || submitted)" class="form-text text-muted text-validator-error">
                    Requerido
                  </small>
                  <br>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="col-md-12"></div>
                  <div class="col-md-12">
                    <div class="form-group">
                      <label>IP</label>
                      <input type="text" class="form-control ip" placeholder="IP" [(ngModel)]="ip.ip" formControlName='ip'>
                    </div>
                    <small *ngIf="form.controls.ip.errors?.required && (form.controls.ip?.touched || submitted)" class="form-text text-muted text-validator-error">
                      Requerido
                    </small>
                  </div>
                  <div class="col-md-12">
                    <div class="form-group">
                      <label>UBICACIÓN</label>
                      <input type="text" class="form-control" placeholder="UBICACIÓN" [(ngModel)]="ip.ubicacion" formControlName='ubicacion'>
                    </div>
                    <small *ngIf="form.controls.ubicacion.errors?.required && (form.controls.ubicacion?.touched || submitted)" class="form-text text-muted text-validator-error">
                      Requerido
                    </small>
                  </div>
                  <div class="col-md-12">
                    <div class="form-group">
                      <label>KM</label>
                      <input type="text" class="form-control" placeholder="KM" [(ngModel)]="ip.km" formControlName='km' disabled>
                    </div>
                    <small *ngIf="form.controls.km.errors?.required && (form.controls.km?.touched || submitted)" class="form-text text-muted text-validator-error">
                      Requerido
                    </small>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="row">
                    <div class="col-md-12">
                      <div class="col-lg-offset-4 col-md-offset-4 col-sm-offset-2 col-xs-offset-2">
                        <label class="title-calendario"> FECHA LEVANTAMIENTO</label>
                        <div class="calendario"></div>
                        <input type="hidden" [(ngModel)]="ip.fecha_levantamiento" formControlName='fecha_levantamiento'>
                        <small *ngIf="ip.fecha_levantamiento == ''" class="form-text text-muted text-validator-error">
                          Requerido
                        </small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="checkbox">
                    <input id="checkbox2" type="checkbox" [(ngModel)]="ip.tipo" formControlName='tipo' [checked]="ip.tipo == 2">
                    <label for="checkbox2">
                      FEEDER
                    </label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="pull-right">
                    <button type="submit" class="btn btn-info">{{ create ? 'CREAR' : 'ACTUALIZAR' }}</button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="row" *ngIf="!create">
      <div class="col-md-12 text-center">
        <a href="javascript:void(0);" (click)="consultaGrids()">VER GRIDS</a>
      </div>
    </div>

    <div *ngIf="consultaGrid">

      <div class="row">
        <div class="col-md-12 text-center">
          <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">AGREGAR GRID</button>
        </div>
      </div>
      <!-- Listado de grids -->
      <div class="row">
        <br>
        <div class="col-md-12">
          <div class="card">
            <div class="header">
              <h4 class="title">GRID</h4>
              <p class="category">LISTADO DE GRIDS PARA IP 0.0.0.0</p>
            </div>
            <div class="content table-responsive table-full-width">
              <table class="table table-hover table-striped">
                <thead>
                  <tr>
                    <th>NO. PLANO</th>
                    <th>PIES</th>
                    <th>CASAS</th>
                    <th>NEGOCIOS</th>
                    <th>ESCUELAS</th>
                    <th>IGLESIAS</th>
                    <th>BALDIOS</th>
                    <th class="text-center">DETALLE</th>
                    <th class="text-center">ELIMINAR</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let grid of grids" class="tr-puntero-color">
                    <td>{{grid[0]}}</td>
                    <td>{{grid[1]}}</td>
                    <td>{{grid[2]}}</td>
                    <td>{{grid[3]}}</td>
                    <td>{{grid[4]}}</td>
                    <td>{{grid[5]}}</td>
                    <td>{{grid[6]}}</td>
                    <td class="text-center">
                      <button class="btn btn-info">DETALLE</button>
                    </td>
                    <td class="text-center">
                      <button class="btn btn-danger">ELIMINAR</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <!-- Fin listado de grids -->
    </div>
    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" data-backdrop="false">
      <div class="modal-dialog modal-md">
        <div class="modal-content">
          <div class="modal-body">
            <!-- Formulario grid -->
            <div class="row">
              <div class="col-md-12">
                <div class="card">
                  <div class="header">
                    <h4 class="title">GRIDS</h4>
                    <hr>
                  </div>
                  <div class="content">
                    <div class="row">
                      <div class="col-md-4">
                        <div class="form-group">
                          <label>NUMERO DE PLANO</label>
                          <input type="text" class="form-control" placeholder="NO PLANO" value="">
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label>PIES</label>
                          <input type="text" class="form-control" placeholder="PIES" value="">
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label>CASAS</label>
                          <input type="number" class="form-control" placeholder="CASAS" value="">
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label>NEGOCIOS</label>
                          <input type="number" class="form-control" placeholder="NEGOCIOS" value="">
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label>ESCUELAS</label>
                          <input type="number" class="form-control" placeholder="ESCUELAS" value="">
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label>BALDIOS</label>
                          <input type="number" class="form-control" placeholder="BALDIOS" value="">
                        </div>
                      </div>
                      <div class="col-md-12">
                        <input type="text" class="form-control" placeholder="COMENTARIOS" value="">
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-12">
                        <br>
                        <select class="selectpicker" data-container="body" data-live-search="true" data-live-search-placeholder="Caminador" data-title="Caminador"
                          data-width="100%" multiple>
                          <option data-tokens="Caminador 1">Caminador 1</option>
                          <option data-tokens="Caminador 2">Caminador 2</option>
                          <option data-tokens="Caminador 3">Caminador 3</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Fin Formulario grid -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">CANCELAR</button>
            <a class="btn btn-default" style="z-index:2">OK</a>
          </div>
        </div>
      </div>
    </div>
    <!-- Fin modal -->
  </div>
</div>